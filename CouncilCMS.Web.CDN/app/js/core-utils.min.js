function coreUtils(){}coreUtils.googleMapApiLoaded=!1;coreUtils.randomId=function(n,t,i){var f="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r="",u;for(i=i||"id",n=n||20,u=0;u<n;u++)r+=f.charAt(Math.floor(Math.random()*f.length));if(t)while($(t+"["+i+"="+r+"]").length>0)r=coreUtils.randomId(n,t,i);return r};coreUtils.isMobileBrowser=function(){var n=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(n=!0)}(navigator.userAgent||navigator.vendor||window.opera),n};coreUtils.getUrlParam=function(n){var i=null,t=[];return location.search.substr(1).split("&").forEach(function(r){t=r.split("=");t[0]===n&&(i=decodeURIComponent(t[1]))}),i};coreUtils.paramsToObject=function(n,t){if(n){var i=[];return t=t||{},n.split("&").forEach(function(n){i=n.split("=");t[i[0].toLowerCase()]=decodeURIComponent(i[1])}),t}return null};coreUtils.objectToParams=function(n){var t="";for(var i in n)n.hasOwnProperty(i)&&(t+=i.toLowerCase()+"="+n[i]+"&");return t.length>0?t.substring(0,t.length-1):null};coreUtils.formToParams=function(n,t){if(n){var i={};return n.find(t).each(function(){var n=$(this);n.val()&&(i[n.attr("name").toLowerCase()]=n.val())}),i}return null};coreUtils.initMapApi=function(){coreUtils.googleMapApiLoaded=!0};coreUtils.createForm=function(n){var l={maps:[]};n=n||$("form");var t=n.find(".bs-select"),i=n.find(".bs-datepicker"),r=n.find(".bs-daterangepicker"),u=n.find(".bs-colorpicker"),f=n.find(".upload-panel"),a=n.find(".bs-mobile"),e=n.find(".bs-ckeditor"),o=n.find(".bs-autocomplete"),s=n.find(".bs-autocompleteselect"),h=n.find(".bs-mask"),c=n.find(".bs-map");n.find(".help-tooltip").popover();t&&t.length>0&&t.each(function(){coreUtils.createSelect($(this))});i&&i.length>0&&i.each(function(){coreUtils.createDatepicker($(this))});r&&r.length>0&&r.each(function(){coreUtils.createDaterangepicker($(this))});u&&u.length>0&&u.each(function(){coreUtils.createColorpicker($(this))});f&&f.length>0&&f.each(function(){coreUtils.createUploader($(this))});e&&e.length>0&&e.each(function(){coreUtils.createCkeditor($(this))});o&&o.length>0&&o.each(function(){coreUtils.createAutocomplete($(this))});s&&s.length>0&&s.each(function(){coreUtils.createAutocompleteSelect($(this))});h&&h.length>0&&h.each(function(){coreUtils.createMask($(this))});c&&c.length>0&&c.each(function(n){l.maps[n]=coreUtils.createPlaceMap($(this))});coreUtils.revalidateForm(n)};coreUtils.revalidateForm=function(n){n=n||$("form");n.removeData("validator");n.removeData("unobtrusiveValidation");$.validator.unobtrusive.parse("form")};coreUtils.resetForm=function(n){$(n).find("input,textarea,select").each(function(){var n=$(this);n.data("default-val")?n.val(n.data("default-val")):n.val("");n.hasClass("bs-select")&&n.selectpicker("refresh")})};coreUtils.geocodeMarker=function(n,t,i,r){t.geocode({address:n},function(n,t){if(t===google.maps.GeocoderStatus.OK){var u=n[0].geometry.location;r.setPosition(u);i.setCenter(u);new google.maps.event.trigger(r,"dragend")}})};coreUtils.createPlaceMap=function(n){if(coreUtils.googleMapApiLoaded){var t={},e=n.find(".map-container"),r=n.find(".input-lat"),u=n.find(".input-lng"),o=n.find(".map-search"),s=new google.maps.LatLng(r.val().replace(",","."),u.val().replace(",",".")),i=new google.maps.Map(e[0],{zoom:e.data("zoom"),center:s,zoomControl:!0,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,rotateControl:!1}),f=new google.maps.Marker({position:s,map:i,draggable:!0}),c=new google.maps.Geocoder,h=new google.maps.places.SearchBox(o[0]);return i.controls[google.maps.ControlPosition.TOP_LEFT].push(o[0]),f.addListener("dragend",function(){var n=f.getPosition();i.setCenter(n);r.val(n.lat().toString().replace(".",","));u.val(n.lng().toString().replace(".",","))}),google.maps.event.addListener(h,"places_changed",function(){var t=h.getPlaces()[0],n=t.geometry.location;f.setPosition(n);i.setCenter(n);r.val(n.lat().toString().replace(".",","));u.val(n.lng().toString().replace(".",","))}),t.map=i,t.marker=f,t.geocoder=c,t.latInput=r,t.lngInput=u,t}setTimeout(500,function(){coreUtils.createPlaceMap(n)})};coreUtils.createCkeditor=function(n){var t=n.data("height")||300,i=n.data("body-class")||"text",r=n.data("toolbar")||"mini";n.ckeditor(function(){},{height:t+"px",enterMode:CKEDITOR.ENTER_P,bodyClass:i,toolbar:r})};coreUtils.createColorpicker=function(n){n.find("option").each(function(){var n=$(this);n.data("content","<i class ='fa fa fa-fw fa-square' style='color:"+n.val()+"'><\/i>&nbsp;"+n.text())});n.selectpicker({size:10})};coreUtils.createSelect=function(n){var t=n.data("live-search")||(n.find("option").length>20?!0:!1);n.selectpicker({liveSearch:t,mobile:coreUtils.isMobileBrowser(),size:7,iconBase:"fa",tickIcon:"fa-check",container:"body"})};coreUtils.createMask=function(n){var t=n.data("mask")||"+38 (999) 999-99-99",i=n.attr("placeholder")||"+38 (ХХХ) ХХХ-ХХ-ХХ";n.mask(t,{placeholder:i})};coreUtils.refreshAllSelects=function(){$(".bs-select").each(function(){$(this).selectpicker("destroy");coreUtils.createSelect($(this))})};coreUtils.refreshSelect=function(n){n.selectpicker("destroy");coreUtils.createSelect(n)};coreUtils.createDatepicker=function(n,t,i){try{n.data("DateTimePicker").destroy()}catch(r){}if(i=i||n.data("format")||"DD.MM.YYYY",n.prop("readonly",!0),n.datetimepicker({format:i,locale:t||"uk",ignoreReadonly:!0,showClear:!0,useCurrent:!1,defaultDate:!1,icons:{time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-arrow-up",down:"fa fa-arrow-down",previous:"fa fa-arrow-left",next:"fa fa-arrow-right",clear:"fa fa-trash",close:"fa fa-times"}}),n.data("to-element"))n.on("dp.change",function(t){$(n.data("to-element")).data("DateTimePicker").minDate(t.date)});if(n.data("from-element"))n.on("dp.change",function(t){$(n.data("to-element")).data("DateTimePicker").maxDate(t.date)})};coreUtils.createTimepicker=function(n,t,i){try{n.data("DateTimePicker").destroy()}catch(r){}if(i=i||n.data("format")||"HH:mm",n.prop("readonly",!0),n.datetimepicker({format:i,locale:t||"uk",ignoreReadonly:!0,showClear:!0,useCurrent:!1,defaultDate:!1,icons:{time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-arrow-up",down:"fa fa-arrow-down",previous:"fa fa-arrow-left",next:"fa fa-arrow-right",clear:"fa fa-trash",close:"fa fa-times"}}),n.data("to-element"))n.on("dp.change",function(t){$(n.data("to-element")).data("DateTimePicker").minDate(t.date)});if(n.data("from-element"))n.on("dp.change",function(t){$(n.data("to-element")).data("DateTimePicker").maxDate(t.date)})};coreUtils.createDaterangepicker=function(n,t){var t=t||"DD.MM.YYYY";n.daterangepicker({autoApply:!0,ranges:{"Сьогодні":[moment(),moment()],"Вчора":[moment().subtract(1,"days"),moment().subtract(1,"days")],"7 днів":[moment().subtract(6,"days"),moment()],"30 днів":[moment().subtract(29,"days"),moment()],"Цей місяь":[moment().startOf("month"),moment()],"Цей рік":[moment().startOf("year"),moment()]},locale:{format:t||"DD.MM.YYYY",separator:" - ",fromLabel:"From",toLabel:"To",cancelLabel:"Clear",monthNames:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],firstDay:1},showCustomRangeLabel:!1,alwaysShowCalendars:!0,opens:"left",autoUpdateInput:!1,showDropdowns:!0});n.on("apply.daterangepicker",function(n,i){$(this).val(i.startDate.format(t)+" - "+i.endDate.format(t))});n.on("cancel.daterangepicker",function(){$(this).val("")})};coreUtils.createUploader=function(n,t){console.log("create uploader");var i=n.find(".img-upload"),r=n.find(".form-control"),e=n.find(".upload-area"),a=n.find(".upload-remodal"),o=n.find(".btn-delete"),f=n.find(".btn-edit"),s=n.find(".btn-view"),h=n.data("crop-width")||0,c=n.data("crop-height")||0,l=r.val(),u;return t=t||n.data("upload-link")||"/api/upload/uploadfile",n.data("crop-width")>0&&n.data("crop-height")>0&&(t=t+(t.indexOf("?")>0?"&":"?")+"cropwidth="+n.data("crop-width")+"&cropheight="+n.data("crop-height")+"&saveoriginal=true&crop=true"),n.data("max-width")>0&&(t=t+(t.indexOf("?")>0?"&":"?")+"limitWidth="+n.data("max-width")),n.data("max-height")>0&&(t=t+(t.indexOf("?")>0?"&":"?")+"limitHeight="+n.data("max-height")),u=n.uploader({url:t,chunk:"100kb",onAdd:function(){l=r.val();i.attr("src",i.data("uploading-img"));u.settings.url=t+(t.indexOf("?")>0?"&":"?")+"oldFile="+encodeURI(l);u.start()},onChunkUpload:function(n,t,i){r.val(Math.round(parseFloat(i.offset/i.total)*100)+"%")},onUpload:function(n,t,h){if(h&&h.status==200){var c=$.parseJSON(h.response);e.addClass("uploaded");i.attr("src",c.preview).data("original",c.original);r.val(c.path);o.show();f.show();s.show().attr("href",c.path)}else return i.attr("src",i.data("nopic-img")).data("original",""),r.val(""),e.removeClass("uploaded"),o.hide(),f.hide(),s.hide().attr("href",""),alert("File upload error");u.removeFile(t);u.refresh()},onError:function(){return i.attr("src",i.data("nopic-img")).data("original",""),r.val(""),e.removeClass("uploaded"),u.splice(),u.refresh(),alert("File upload error")}})[0],o.click(function(){o.hide();f.hide();s.hide().attr("href","");i.attr("src",i.data("nopic-img")).data("original","");r.val("");e.removeClass("uploaded")}),f&&f.click(function(){coreUtils.showCropModal(i.data("original"),h,c,h>0&&c>0,function(n){e.addClass("uploaded");i.attr("src",n.preview).data("original",n.original);r.val(n.path);o.show();f.show();s.show().attr("href",n.path)})}),u};coreUtils.createAutocomplete=function(n){n.val()?n.prop("readonly",!0):(n.prop("readonly",!1),n.autocomplete({serviceUrl:n.data("remote"),paramName:"query",minChars:3,deferRequestBy:300,orientation:"auto",showNoSuggestionNotice:!0,noSuggestionNotice:LOCALS.noResults,appendTo:n.parents(".form-group"),forceFixPosition:!0,autoSelectFirst:!0,preventBadQueries:!1,transformResult:function(n){return{suggestions:$.map($.parseJSON(n),function(n){return{value:n.DisplayText,data:n.Value}})}},onSearchStart:function(){n.parent().find(".input-clear > .fa").removeClass("fa-times").addClass("fa-spin fa-refresh")},onSearchComplete:function(){n.parent().find(".input-clear > .fa").removeClass("fa-spin fa-refresh").addClass("fa-times")},onSelect:function(t){n.prop("readonly",!0);n.autocomplete().dispose();var i=n.data("related-element"),r=n.data("on-select");i&&$(i).val(t.data);r&&eval(r)}}))};coreUtils.createAutocompleteSelect=function(n){var t;if(n.prop("readonly",!0),n.hasClass("ac-value"))t=n.parent().find(".ac-text");else{t=$("<input/>");t.attr("class",n.attr("class")+" ac-text").attr("name","ac"+n.attr("name")).attr("placeholder",n.attr("placeholder")?n.attr("placeholder"):"").val(n.data("text"));t.on("blur",function(){n.trigger("blur")});t.insertBefore(n);n.attr("placeholder","");n.addClass("ac-value")}n.val()?t.prop("readonly",!0):(t.prop("readonly",!1),t.autocomplete({serviceUrl:n.data("remote"),paramName:"query",minChars:3,deferRequestBy:300,orientation:"auto",showNoSuggestionNotice:!0,noSuggestionNotice:LOCALS.noResults,appendTo:n.parents(".form-group"),forceFixPosition:!0,autoSelectFirst:!0,preventBadQueries:!1,transformResult:function(n){return{suggestions:$.map($.parseJSON(n),function(n){return{value:n.DisplayText,data:n.Value}})}},onSearchStart:function(){n.parent().find(".input-clear > .fa").removeClass("fa-times").addClass("fa-spin fa-refresh")},onSearchComplete:function(){n.parent().find(".input-clear > .fa").removeClass("fa-spin fa-refresh").addClass("fa-times")},onSelect:function(i){n.val(i.data);n.trigger("blur");t.prop("readonly",!0);t.autocomplete().dispose();var r=n.data("on-select");r&&eval(r)}}))};coreUtils.showCropModal=function(n,t,i,r,u){var e,f;try{$("#divCrop").empty().remove()}catch(o){}e="<div id='divCrop' class='modal modal-800 fade' tabindex='-1' data-width='800' style='display:none;'><div class='modal-body'><div class='row'><div class='col-sm-7'><div class='cropper-bg'><div style='background-color:rgba(0,0,0,.5);height:450px;'><div class='crop-form form-group' style='position:relative; max-width:420px; height:450px;' style='display:none;'><img style='width:100%;' src='"+n+"' /><\/div><\/div><\/div><\/div><div class='col-sm-5'><div class='well'><label class='control-label'>Співвідношення сторін<\/label><div class='row ac-btns'><div class='col-sm-8'><div class='form-group'><button type='button' data-width='0' data-height='0' class='btn btn-block btn-default "+(t==0&&i==0?"active":"")+" btn-crop-ac-free'"+(r?" disabled":"")+">довільно<\/button><\/div><\/div><div class='col-sm-4'><div class='form-group'><button type='button' data-width='400' data-height='400' class='btn btn-block btn-default "+(t/i==1?"active":"")+" btn-crop-ac-1-1'"+(r?" disabled":"")+">1:1<\/button><\/div><\/div><div class='col-sm-4'><div class='form-group'><button type='button' data-width='400' data-height='267' class='btn btn-block btn-default "+(t/i==3/2?"active":"")+" btn-crop-ac-3-2'"+(r?" disabled":"")+">3:2<\/button><\/div><\/div><div class='col-sm-4'><div class='form-group'><button type='button' data-width='267' data-height='400' class='btn btn-block btn-default "+(t/i==2/3?"active":"")+" btn-crop-ac-2-3'"+(r?" disabled":"")+">2:3<\/button><\/div><\/div><div class='col-sm-4'><div class='form-group'><button type='button' data-width='400' data-height='300' class='btn btn-block btn-default "+(t/i==4/3?"active":"")+" btn-crop-ac-4-3'"+(r?" disabled":"")+">4:3<\/button><\/div><\/div><div class='col-sm-4'><div class='form-group'><button type='button' data-width='300' data-height='400' class='btn btn-block btn-default "+(t/i==3/4?"active":"")+" btn-crop-ac-3-4'"+(r?" disabled":"")+">3:4<\/button><\/div><\/div><div class='col-sm-4'><div class='form-group'><button type='button' data-width='400' data-height='225' class='btn btn-block btn-default "+(t/i==16/9?"active":"")+" btn-crop-ac-16-9'"+(r?" disabled":"")+">16:9<\/button><\/div><\/div><div class='col-sm-4'><div class='form-group'><button type='button' data-width='225' data-height='400' class='btn btn-block btn-default "+(t/i==9/16?"active":"")+" btn-crop-ac-9-16'"+(r?" disabled":"")+">9:16<\/button><\/div><\/div><\/div><hr /><div class='form-group'><label class='control-label'>Розмір вихідного зображення<\/label><div class='form-group'><div class='radio'><label><input type='radio' "+(r?"disabled":"checked")+" name='cropSizeType' class='crop-size-type' value='auto'/><span>Відповідно обраній області<\/span><\/label><\/div><div class='radio'><label><input type='radio' "+(r?"checked disabled":"")+" name='cropSizeType' class='crop-size-type' value='manual'/><span>Вказати вручну<\/span><\/label><\/div><\/div><\/div><div><div class='form-group'><div class='input-group'><span class='input-group-addon' style='width:80px;'>Ширина:<\/span><input type='text' "+(r?"disabled":"readonly")+" class='form-control crop-width' name='tbW' data-ac-width='"+t+"' value='"+t+"' /><span class='input-group-addon'>px<\/span><\/div><\/div><div><div class='input-group'><span class='input-group-addon' style='width:80px;'>Висота:<\/span><input type='text' "+(r?"disabled":"readonly")+" class='form-control crop-height' name='tbH' data-ac-height='"+i+"' value='"+i+"' /><span class='input-group-addon'>px<\/span><\/div><\/div><\/div><\/div><\/div><\/div><div class='modal-footer'><button type='button' class='btn btn-default' data-dismiss='modal'>Закрити<\/button><button type='button' class='btn btn-primary btn-crop'>Зберегти<\/button><\/div><\/div><\/div>";$("body").append(e);$("#divCrop").modal({backdrop:"static",keyboard:!1});f=coreUtils.createCropBox(t,i,r);$("#divCrop").find(".modal-footer .btn-crop").on("click",function(){var t="/api/upload/ResizeImage?path="+n+"&width="+f.w+"&height="+f.h+"&x="+f.x+"&y="+f.y;$(".crop-size-type:checked").val()=="manual"&&(t+="&resizeWidth="+$(".crop-width").val()+"&resizeHeight="+$(".crop-height").val());$.post(t,function(n){u(n);$("#divCrop").modal("hide")})});$(".ac-btns button").click(function(){$(".ac-btns .active").removeClass("active");$(this).addClass("active");f=coreUtils.createCropBox($(this).data("width"),$(this).data("height"),r)});$(".crop-size-type").on("change",function(){f=coreUtils.createCropBox(f.cW,f.cH,r)})};coreUtils.createCropBox=function(n,t){var c=n,l=t,s,h,e=$("#divCrop").find(".crop-form"),u=$("#divCrop").find("img"),o=$("#divCrop").find(".crop-size-type:checked").val(),i=$("#divCrop").find(".crop-width"),r=$("#divCrop").find(".crop-height"),f={x:0,y:0,w:n,h:t,cW:n,cH:t};return e.fadeOut(100,function(){try{u.cropper("destroy")}catch(c){}if(u.one("load",function(){u.cropper({viewMode:1,aspectRatio:t>0&&n>0?n/t:NaN,movable:!1,zoomable:!1,rotatable:!1,scalable:!1,minContainerWidth:420,minContainerHeight:450,maxContainerHeight:450,ready:function(){u.cropper("setCanvasData",s);u.cropper("setCropBoxData",h);e.fadeIn(100)},crop:function(n){f.x=Math.round(n.x)>0?Math.round(n.x):0;f.y=Math.round(n.y)>0?Math.round(n.y):0;f.w=Math.round(n.width)-1;f.h=Math.round(n.height)-1;o=="auto"&&(i.val(Math.round(n.width)),r.val(Math.round(n.height)))}})}).each(function(){this.complete&&$(this).load()}),o=="manual"){if(i.val(n).data("ac-width",n).prop("readonly",!1),r.val(t).data("ac-height",t).prop("readonly",!1),n>0&&t>0){i.on("change",function(){r.val(Math.round(parseInt(i.val())*t/n))});r.on("change",function(){i.val(Math.round(parseInt(r.val())*n/t))})}}else i.data("ac-width",n).prop("readonly",!0).unbind("change"),r.data("ac-height",t).prop("readonly",!0).unbind("change")}),f};coreUtils.refreshListIndexes=function(n,t){t=t||"";var i=t+n.data("prefix");n.children(".item").each(function(n){var t=$(this),r=i+"["+n+"].";t.find(".input").each(function(){$(this).attr("data-generic-name")||$(this).attr("data-generic-name",$(this).attr("name"));$(this).attr("name",i+"["+n+"]."+$(this).attr("data-generic-name"))});t.find("div[data-prefix]").each(function(){coreUtils.refreshListIndexes($(this),r)})})};coreUtils.disableButton=function(n){n.prop("disabled",!0).bind("click",!1).addClass("disabled");n.find(".fa").hide();n.prepend("<span class='ld-spin'><i class='fa fa-fw fa-circle-o-notch fa-spin'><\/i>&nbsp;<\/span>")};coreUtils.enableButton=function(n){n.prop("disabled",!1).unbind("click",!1).removeClass("disabled");n.find(".ld-spin").remove();n.find(".fa").show()};coreUtils.createPage=function(n){n.find(".slide-gallery").fotorama({nav:"thumbs"});coreUtils.createPageMaps(n);n.find(".content-file").find("a").removeAttr("download").attr("target","_blank")};coreUtils.createPageMaps=function(n){coreUtils.googleMapApiLoaded?n.find(".content-map").each(function(){coreUtils.createPageMap($(this))}):setTimeout(function(){coreUtils.createPageMaps(n)},500)};coreUtils.createPageMap=function(n){var r,i=null,t=$(n).find(".content-map-container"),u=parseFloat(t.data("lat").replace(",",".")),f=parseFloat(t.data("lng").replace(",",".")),e=t.data("zoom"),o=t.data("height")||400;t.css({height:o});r=new google.maps.Map(t[0],{zoom:e,center:{lat:u,lng:f},rotateControl:!1,scrollwheel:!1});n.find(".map-point").each(function(){var n=$(this),t=new google.maps.Marker({position:{lat:parseFloat(n.data("lat").toString().replace(",",".")),lng:parseFloat(n.data("lng").toString().replace(",","."))},title:n.data("title"),desc:n.data("desc"),map:r});t.addListener("click",function(){i&&i.close();i=new google.maps.InfoWindow;i.setContent(this.desc);i.open(r,this)})})};